<div class="container-fluid"
     ng-file-drop="onFileSelect($files)"
     ng-file-drop-available="dropSupported=true"
     ng-file-drag-over-class="upload-dragover"
     ng-file-drag-over-delay="100"
     ng-controller="AppDetailsCtrl"
     ng-if="!$rootScope.isLoading()"
     style="min-height: 85vh;">

    <p class="text-center text-info"><b class="btn-default" ng-file-select="onFileSelect($files)">Select</b> or drop apk/ipa
        here for
        upload...</p>

    <div ng-if="progress>0">
        <progressbar value="progress" class="progress-striped active">{{ progress }}%</progressbar>
    </div>

    <div>
        <div class="pull-left"><img icon-src="{{ app.icon_url }}" class="details-app-icon">{{ app.name }}</div>
        <a ng-href="#/settings/{{ app.app_key }}">
            <div class="pull-right gear-icon"></div>
        </a>
    </div>
    <table class="table table-striped table-hover">
        <tr>
            <th ng-if="canWrite()"></th>
            <th>
                <order-btn field='version_name' text="Version Name"/>
            </th>
            <th>
                <order-btn field='version_code' text="Version Code"/>
            </th>
            <th>Release notes</th>
            <th>
                <order-btn field='created_on' reverse="true" text="Upload date"/>
            </th>
        </tr>
        <tr ng-repeat="b in builds | orderBy:order.field:order.reverse" class="text-center">
            <td ng-if="canWrite()">
                <input
                        type="checkbox"
                        ng-checked="selection.indexOf(b.id) > -1"
                        ng-click="toggleBuild(b.id)"
                        >
            </td>
            <td ng-click="showBuildInfo(b)">{{ b.version_name }}</td>
            <td ng-click="showBuildInfo(b)">{{ b.version_code }}</td>
            <td ng-click="showBuildInfo(b)" style="text-align: left;">{{ b.release_notes | addEllipsis : 30 }}</td>
            <td ng-click="showBuildInfo(b)" style="white-space: nowrap;">{{ b.created_on * 1000 | date : 'yyyy-MM-dd HH:mm:ss' }}</td>
        </tr>
    </table>

    <div ng-if="canWrite()">
        <div ng-click="remove()" ng-class="{disabled:ids.length<=0}" class="btn btn-danger">Delete
            <ng-pluralize count="ids.length" when="{0:'', 'one': '1 build', 'other': '{} builds'}"></ng-pluralize>
        </div>
    </div>
</div>